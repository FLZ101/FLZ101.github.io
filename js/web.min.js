var host = "http://" + window.location.host; function succeded(e, i, t) { switch (i) { case "logout": null == $.cookie("u_id") && (-1 < host.indexOf("localhost") ? redirect("/index.aspx") : redirect("http://www.kelynle.me")); break; case "get-all-blogs": $("#blog").html('<div class="row"></div>'); for (i = 0; i < e.d.length; i++)$("#blog .row").append("" + itemBlog("/upload/blog/580_" + e.d[i].Image, "/upload/profile/143_150_131200180000013675.png", "", "Huy Hung", e.d[i].CreatedOnDateMix, e.d[i].Title, e.d[i].Description, "/bai-viet/" + e.d[i].UrlFriendly + "/")); $("#blog").append('<div class="clear_both"></div>'), resizeBlogItem(); break; case "get-all-blogs-published": if (0 < e.d.length) { for (i = 0; i < e.d.length; i++)$("#blog .row").append("" + itemBlog("/upload/blog/580_" + e.d[i].Image, "/upload/profile/" + e.d[i].Avatar, "", e.d[i].CreatedByUserName, e.d[i].CreatedOnDateMix, e.d[i].Title, e.d[i].Description, "/bai-viet/" + e.d[i].UrlFriendly + "/")); $("#blog").append('<div class="clear_both"></div>'), resizeBlogItem(), $("#blog").attr("scroll", "1") } else $("#blog").attr("scroll", "0"); break; case "get-favorite-blogs": for (i = 0; i < e.d.length; i++)$("#favorite-blog .favorite-item ul").append('<li><a href="/bai-viet/' + e.d[i].UrlFriendly + '/"><img src="http://www.kelynle.me/upload/blog/580_' + e.d[i].Image + '" title="' + e.d[i].ImageTitle + '" alt="' + e.d[i].ImageAlt + '" /><div class="blog-title">' + e.d[i].Title + "</div></a></li>") } } function getFavoriteBlogs(e, i) { varType = "POST", varUrl = "/services/jsondata.asmx/GetFavoriteBlogs", varData = '{"item":' + JSON.stringify(i) + "}", varContentType = "application/json; charset=utf-8", varDataType = "json", varProcessData = !0, varAsync = !0, CallService("get-favorite-blogs", i, succeded) } function getAllBlogs(e, i) { varType = "POST", varUrl = "/services/jsondata.asmx/GetAllBlogs", varData = '{"item":' + JSON.stringify(i) + "}", varContentType = "application/json; charset=utf-8", varDataType = "json", varProcessData = !0, CallService("get-all-blogs", e, succeded) } function getAllBlogsPublished(e, i) { varType = "POST", varUrl = "/services/jsondata.asmx/GetAllBlogsPublished", varData = '{"item":' + JSON.stringify(i) + "}", varContentType = "application/json; charset=utf-8", varDataType = "json", varProcessData = !0, CallService("get-all-blogs-published", e, succeded) } function logout(e) { varType = "POST", varUrl = "/services/jsondata.asmx/Logout", varData = "", varContentType = "application/json; charset=utf-8", varDataType = "json", varProcessData = !0, varAsync = !1, CallService("logout", e, succeded) } function socialLogin(e, i) { varType = "POST", varUrl = "/services/jsondata.asmx/SocialLogin", varData = '{"item":' + JSON.stringify(i) + "}", varContentType = "application/json; charset=utf-8", varDataType = "json", varProcessData = !0, varAsync = !0, CallService("social-login", i, succeded) } function itemBlog(e, i, t, a, s, o, r, l) { var c = "<article>"; return c += '<a href="' + l + '"><img class="blog-image" src="' + e + '" /></a>', c += '<div class="author time ">', c += '<div class="author-avatar"><div><img class="circle-radius" src="' + i + '" /></div></div>', c += '<div class="pubdate"><a class="author-name" href="' + t + '">' + a + '</a> <time class="date">' + s + "</time></div>", c += "</div>", c += '<h2 class="clear_both title"><a href="' + l + '">' + o + "</a></h2>", c += '<p class="blog-description">' + r + "</p>", c += "</article>" } function resizeBlogItem() { $("#blog").css({ width: $("#blog").parent().width() - 310 }); var e = $("#blog").width() - 20; isMobile.any(); var i, t = 350, a = Math.floor(e / t); 0 == a && (a = 1), i = 2 < a ? 2 * (a - 1) * 10 : 10 * a, 1 == a && (i = 0), t = Math.floor((e - i) / a), $("#blog .row article").each(function () { $(this).css({ clear: "" }) }), $("#blog .row article").each(function () { 0 < $(this).index() & $(this).index() % a == 0 && $(this).css({ clear: "both" }), $(this).eq(a).css({ clear: "both" }), $(this).css({ width: t }) }) } function resizeItemBlock() { var e = 180, i = $(window).width(); $(".right-panel").css({ display: "", width: "" }), $(".item-block").css({ "max-width": "" }), $(".item-block article .title, .item-of-the-day article .title, .cat-blog-list ul li").css({ "font-size": "" }), $("body").css({ "font-size": "" }), $("#maincontent .middle").css({ width: "" }); var t = $(".item-block").width() - 20; i < 1e3 && ($("#maincontent .middle").css({ width: "calc(100% - 270px)" }), $(".right-panel").css({ width: "250px" }), i < 900 && ($(".right-panel").css({ display: "none" }), $(".item-block").css({ "max-width": "100%" }), $("#maincontent .middle").css({ width: "100%" }), e = 160, i < 550 && (e = 130, i < 400 && (e = 110), $(".item-block article .title, .item-of-the-day article .title").css({ "font-size": 16 }), $(".cat-blog-list ul li").css({ "font-size": 15 }), $("body").css({ "font-size": 14.5 }))), t = $(".item-block").width()), isMobile.any(); var a, s = 700, o = Math.floor(t / s); 0 == o && (o = 1), a = 2 < o ? 2 * (o - 1) * 10 : 10 * o, 1 == o && (a = 0), s = Math.floor((t - a) / o), $(".item-block article").each(function () { $(this).css({ clear: "" }) }), $(".item-block article").each(function () { 0 < $(this).index() & $(this).index() % o == 0 && $(this).css({ clear: "both" }), $(this).eq(o).css({ clear: "both" }), $(this).css({ width: s }), $(this).find("img").css({ width: e }) }) } function resizeItemOfTheDay() { var e = $(".item-of-the-day").width() - 30 - 25; isMobile.any(); var i, t = 400, a = Math.floor(e / t); 0 == a && (a = 1), i = 2 < a ? 2 * (a - 1) * 15 : 15 * a, 1 == a && (i = 0), t = Math.floor((e - i) / a), $(".item-of-the-day article").each(function () { $(this).css({ clear: "" }) }), $(".item-of-the-day article").each(function () { 0 < $(this).index() & $(this).index() % a == 0 && $(this).css({ clear: "both" }), $(this).eq(a).css({ clear: "both" }), 1 == a ? ($(this).css({ width: t + 25 }), $(this).css({ "margin-right": 0, "margin-bottom": 20 })) : ($(this).css({ "margin-right": "", "margin-bottom": "" }), $(this).css({ width: t })) }), resizeWordImage(a) } function resizeWordImage(e) { $(".word-image").find("img").each(function () { hImage = $(window).height() - $(".en-word").height() - $(".vn-word").height() - $(".alphabet").height() - $("#bottom-section").height() - 230, $(this).css({ margin: "" }), 300 <= hImage && (hImage = 300), hImage <= 120 && (hImage = 120, $(this).css({ margin: "10px 0px 10px 0px" })), $(this).css({ height: hImage, width: hImage }), 1 == parseInt($(this).attr("story")) && (220 <= hImage && $(this).css({ height: 220, width: 220 }), hImage <= 120 && $(this).css({ height: 120, width: 120 })) }), $(".wordlist-image").find("img").each(function () { $(this).css({ margin: "" }), $(this).css({ height: "", width: "" }); var e = 120; $(window).width() < 400 && (e = 90, $(this).parent().parent().find(".wordlist-cover").css({ "max-width": $(".item-of-the-day article").width() - (e + 70) })), $(this).css({ height: e, width: e }), $(this).parent().parent().find(".wordlist-cover").css({ "max-width": $(".item-of-the-day article").width() - ($(this).width() + 15) }) }); var i = 0; $(".item-of-the-day article").each(function () { i < $(this).height() && (i = $(this).height()) }), $(".item-of-the-day article").each(function () { 1 == e ? $(this).css({ height: "" }) : $(this).css({ height: i }) }) } function resizeHeader() { $(".header").css({ "text-align": "" }), $(".header #right").css({ width: $(".header").width() - $("#logo").width(), display: "" }), $("#top-banner").css({ width: $(".header #right").width() - 40, display: "" }), $(".nav-menu ul li").css({ margin: "", display: "" }), $(".header #logo img").css({ width: "" }), 728 < $("#top-banner").width() && $("#top-banner").css({ width: 728 }); var e = $(window).width(); e < 720 && ($("#top-banner").css({ display: "none" }), $(".nav-menu ul li").css({ margin: 5, display: "block" }), $(".header #logo img").css({ width: 140 }), e < 600 && ($(".header #logo img").css({ width: 130 }), e < 500 && ($(".header").css({ "text-align": "center" }), $("#right").css({ display: "none" })))) } function autoAddLikeFanpageOnImgBlog(e) { if ("" == $.trim(e)) return ""; var i = e.split(";"); if (0 < i.length) { for (var t = '<div id="auto-add-on-blog-image">', a = 0; a < i.length; a++)0 < i[a].indexOf("play.google.com") && (t += '<a href="' + i[a] + '" target="_blank"><img src="/images/googleplayicon.png" /></a>'), 0 < i[a].indexOf("apple.com") && (t += '<a href="' + i[a] + '" target="_blank"><img src="/images/appstoreicon.png" /></a>'), 0 < i[a].indexOf("microsoft.com") && (t += '<a href="' + i[a] + '" target="_blank"><img src="/images/microsoftstoreicon.png" /></a>'), 0 < i[a].indexOf("essentialenglish.review") && (t += '<a href="' + i[a] + '"><img src="/images/study-now.png" /></a>'); return t += "</div>" } return "" } function commonFullModalPopup(e, i) { $("#article-popup").remove(), 0 == $("#article-popup").length && $(document.body).append("<div class='popup-overlay'></div><div id='article-popup'><div onclick=\"$('#article-popup').remove(); $('.popup-overlay').remove();$('#account-cover').css({ 'opacity': '1' });\" style='text-align:right; cursor:pointer;padding-bottom: 0px;position: relative; top: -5px; right: -5px' title='Đóng'><img style='border-radius: 30px' src='/images/home/popup_del_btn.jpg'></div><div id='article-container'>" + e + "</div>"), resizeFullCommonModal("#0095cc", "13px", "", "", i) } function resizeFullCommonModal(e, i, t, a, s) { var o = $(window).width() - 40; s < o && (o = s), $("#article-container").css({ color: e, "font-size": i }), $("#article-popup").css({ width: o }), $("#article-popup").animate({ opacity: "1" }, 300), $("#article-popup").css({ "border-radius": t, border: a, left: ($(window).width() - o) / 2 - 20, position: "fixed", top: ($(window).height() - $("#article-popup").height()) / 2 - 20 }), resizeCommonModal() } $(function () { sessionStorage.clear(), resizeHeader(), resizeItemBlock(), resizeBlogItem(), resizeItemOfTheDay(), $(window).scroll(function () { $(window).height(); 100 < parseInt($(this).scrollTop()) ? (0 == $("#go-to-top").length && ($("body").append('<div id="go-to-top"><div><img src="/images/icon_gototop.png" /></div></div>'), $("#go-to-top").click(function () { $("html, body").animate({ scrollTop: 0 }, 500) })), $("#go-to-top").show()) : $("#go-to-top").hide(), $(window).scrollTop() + $(window).height() > $(document).height() - 150 ? $("#stick").css({ position: "relative" }) : $("#stick").css({ position: "" }) }), $(window).resize(function () { resizeHeader(), resizeBlogItem(), resizeItemBlock(), resizeItemOfTheDay() }), $(".u_info_logout").click(function () { logout("") }), 0 < $("#login").length && (checkjs("login.js", "/js/login.js?n=" + currentdatemi()), checkjs("register.js", "/js/register.js?n=" + currentdatemi()), checkjs("fbLogin.js", "/js/fbLogin.js?n=" + currentdatemi()), checkjs("googleLogin.js", "/js/googleLogin.js?n=" + currentdatemi()), checkjs("https://apis.google.com/js/client.js", "https://apis.google.com/js/client.js")) });